pico-8 cartridge // http://www.pico-8.com
version 35
__lua__

local p={}
p.x = 60
p.y = 80
p.grounded = false
p.jump = false
p.jump_height = 0

function _init()
	cls()
end

function _update()

end

function _update60()
	apply_gravity()
	
	set_grounded()
	move_player()
end

function _draw()
--	map(0, 0, 0, 0, 16, 16)
	map(0, 0, 0, 0, 128, 64)

	draw_player()
end

function draw_player()
	spr(2, p.x, p.y)
end

function set_grounded()
	local x = flr(p.x / 8)
	local y = flr(p.y / 8) + 1
	
	if mget(x, y) == 33 then
		p.grounded = true
	else
		p.grounded = false
	end
	
end

function move_player()
	if btn(0, 0) then
	
		if p.x <= 0 then
			p.x = 0
		else
			p.x -= 1
		end
	end
	
	if btn(1, 0) then
		p.x += 1
	end
	
	if btnp(5, 0) then
		p.jump = true
	end
	
	player_jump()
	
	if p.x > 60 then
		camera(p.x - 60, 0)
	end
end

function apply_gravity()

	if not p.grounded and 
			not p.jump then
		p.y += 2
	end
end

function player_jump()

	if p.jump and 
		p.jump_height < 30 then	
		p.y -= 2
		p.jump_height += 2
	else
		p.jump = false
		p.jump_height = 0
	end
end

__gfx__
00000000cccccccc7777777700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000cccccccc7777777700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700cccccccc7777777700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000cccccccc7777777700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000cccccccc7777777700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700cccccccc7777777700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000cccccccc7777777700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000cccccccc7777777700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000009aaaaa990000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000aaaaaaa90000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000aa999aa90000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000aa99aaa90000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000999aaaa90000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000999aa9990000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000999999990000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000999aa9990000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000554444440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000455544440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000444554440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000444455550000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000555555440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000444554440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000444455440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000444445440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010121212121212121010101010101010101010101010101012121112121010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2121212121212121212121212121212121212121212121212121212121212121212121212121212121212121000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2121212121212121212121212121212121212121212121212121212121212121212121212121212121212121000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2121212121212121212121212121212121212121212121212121212121212121212121212121212121212121000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2121212121212121212121212121212121212121212121212121212121212121212121212121212121212121000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101010101010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
